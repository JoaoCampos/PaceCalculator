var paceCalculator=(function(){var j={open:function(n,o){document.querySelector("#modal-window").style.display="block";document.querySelector("#modal-info").style.display="none";document.querySelector("#modal-error").style.display="none";switch(n){case"info":var l=d(f.time());var r=+(Math.round(f.distance()+"e+2")+"e-2");var m=document.querySelector("#distance-unit option:checked");var q=d(f.pace());var k=document.querySelector("#pace-unit option:checked");document.querySelector("#modal-info-time").innerHTML=l.h+"h "+l.m+"′ "+l.s+"″";document.querySelector("#modal-info-distance").innerHTML=r+" "+(m.textContent||m.innerText);document.querySelector("#modal-info-pace").innerHTML=q.m+"′ "+q.s+"″ / "+(k.textContent||k.innerText);document.querySelector("#modal-info").style.display="block";break;case"error":document.querySelector("#modal-error").innerHTML=o;document.querySelector("#modal-error").style.display="block";break;default:this.close()}},close:function(){document.querySelector("#modal-window").style.display="none"}};var e={time:function(){if(!b.time()){j.open("error","To calculate Time, enter the Pace and Distance")}else{var k=d(f.distance()*f.pace()*f.factor());document.querySelector("#time-hours").value=k.h;document.querySelector("#time-minutes").value=k.m;document.querySelector("#time-seconds").value=k.s;j.open("info")}},distance:function(){if(!b.distance()){j.open("error","To calculate Distance, enter the Time and Pace")}else{var k=f.time()/(f.pace()/f.factor(true));document.querySelector("#distance-amount").value=k.toFixed(4);j.open("info")}},pace:function(){if(!b.pace()){j.open("error","To calculate Pace, enter the Time and Distance")}else{var l=(f.time()/f.distance())/f.factor();var k=d(parseInt(l));if(parseInt(k.h)>0){k.m=parseInt(k.m)+(parseInt(k.h)*60);k.h=0}document.querySelector("#pace-minutes").value=k.m;document.querySelector("#pace-seconds").value=k.s;j.open("info")}},splits:function(){}};var b={time:function(){return(!!f.distance()&&!!f.pace())},distance:function(){return(!!f.time()&&!!f.pace())},pace:function(){return(!!f.time()&&!!f.distance())}};var f={factor:function(k){var m=document.querySelector("#distance-unit option:checked").value;var l=document.querySelector("#pace-unit option:checked").value;return(!!k)?i(l,m):i(m,l)},time:function(){var n=document.querySelector("#time-hours").value;n=(n=="")?0:c(n);var k=document.querySelector("#time-minutes").value;k=(k=="")?0:c(k);var l=document.querySelector("#time-seconds").value;l=(l=="")?0:c(l);var o=h(n,k,l);return(g(n)&&g(k)&&g(l)&&(o>0))?parseFloat(o):false},distance:function(){var k=document.querySelector("#distance-amount");var l=k.value;l=c(l.replace(",","."));k.value=l;return(g(l)&&l>0)?parseFloat(l):false},pace:function(){var k=document.querySelector("#pace-minutes").value;k=(k=="")?0:c(k);var l=document.querySelector("#pace-seconds").value;l=(l=="")?0:c(l);var n=h(0,k,l);return(g(k)&&g(l)&&(n>0))?parseFloat(n):false}};function i(k,l){var m={Mile:{Mile:1,Kilometer:1.609344,Meter:1609.344,Yard:1760,"Half Mile":2,"Quarter Mile":4,"Eigth Mile":8,"1500M":1.072896,"800M":2.01168,"400M":4.02336,"200M":8.04672},Kilometer:{Mile:0.6213712,Kilometer:1,Meter:1000,Yard:1093.613,"Half Mile":1.2427424,"Quarter Mile":2.4854848,"Eigth Mile":4.9709696,"1500M":0.66666666,"800M":1.25,"400M":2.5,"200M":5},Meter:{Mile:0.0006213712,Kilometer:0.001,Meter:1,Yard:1.093613,"Half Mile":0.0012427424,"Quarter Mile":0.0024854848,"Eigth Mile":0.0049709696,"1500M":0.00066666666,"800M":0.00125,"400M":0.0025,"200M":0.005},Yard:{Mile:0.0005681,Kilometer:0.0009144,Meter:0.9144,Yard:1,"Half Mile":0.0011362,"Quarter Mile":0.0022724,"Eigth Mile":0.0045448,"1500M":0.0006096,"800M":0.001143,"400M":0.002286,"200M":0.004572}};return m[k][l]}function h(k,l,m){return parseFloat(k*3600)+parseFloat(l*60)+parseFloat(m)}function d(o){var n=Math.floor(o/3600);var k=Math.floor(o/60)-(n*60);var l=o-(k*60)-(n*3600);return{h:("0"+n).slice(-2),m:("0"+k).slice(-2),s:("0"+l).slice(-2)}}function c(k){var l=parseFloat(k);return(!isNaN(l))?l:0}function g(k){var l=parseFloat(k);return(!isNaN(l)&&l>=0)}function a(m){var l=document.querySelector("#"+m+" option:checked").getAttribute("value");l=l.split("-");if(l.length==2){var n=(l[1]=="K")?"Kilometer":"Mile";document.querySelector("#distance-amount").value=l[0];var o=document.querySelectorAll("#distance-unit option");for(var k=0;k<o.length;k++){o[k].removeAttribute("selected")}document.querySelector("#distance-unit option[value="+n+"]").setAttribute("selected","selected")}}return{init:function(){document.querySelector("#event-select").onchange=function(){a(this.getAttribute("id"))};document.querySelector("#calculate-time").onclick=function(k){e.time();k.preventDefault();this.blur()};document.querySelector("#calculate-distance").onclick=function(k){e.distance();k.preventDefault();this.blur()};document.querySelector("#calculate-pace").onclick=function(k){e.pace();k.preventDefault()};document.querySelector("#modal-alright").onclick=function(){j.close()}}}}());